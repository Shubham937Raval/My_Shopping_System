<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Products</h1>
    <div class="btn-toolbar btn-outline-info mb-2 mb-md-0">
      <select id="selectProductID" class="btn btn-sm btn-outline-info">
        <option value="Category">
          <button type="button"
            class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
            Category
          </button>
        </option>
        <% Category.forEach(function(i){ %>
          <option value="<%=i.Product_Category%>">
            <button type="button"
              class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
              <%=i.Product_Category%>
            </button>
          </option>
          <%})%>
      </select>
    </div>
  </div>
  <div class="container">
    <div class="d-flex d-row">
      <div class="p-2">
        <button class="btn btn-outline-info mx-2">
          <div class="table-responsive small">
            <table>
              <thead>
                <tr>
                  <th>Category:</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span id="productcategory"></span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </button>
      </div>
      <div class="p-2">
        <button class="btn btn-outline-info mx-2">
          <div class="table-responsive small">
            <table>
              <thead>
                <tr>
                  <th>Orders:</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span id="categorywiserordercount"></span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </button>
      </div>
    </div>
    <div class="d-flex d-row">
      <div class="p-2">
        <button class="btn btn-outline-info mx-2">
          <div class="table-responsive small">
            <table>
              <thead>
                <tr>
                  <th>Revenue Generated:</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>$<span id="categorywiserevenue"></span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </button>
      </div>
    </div>
  </div>
  <!-- <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas> -->
  <h2 class="my-5" id="h2Head"></h2>

  <!-- sport -->
  <div class="container">
    <div class="form-group" id="selectrows" style="display: none;">
      <label class="form-label">Select rows:</label>
      <select class="form-control" name="state" id="maxRows" style="width: 140px;">
        <option value="5000">Show ALL Rows</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
        <option value="20">20</option>
        <option value="50">50</option>
        <option value="70">70</option>
        <option value="100">100</option>
      </select>
    </div>
    <div class="table-responsive small" id="tablesportdiv" style="display: none">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th>
              ID
            </th>
            <th>
              <%= Sportshead[7] %>
            </th>
            <th>
              <%= Sportshead[2] %>
            </th>
            <th>
              <%= Sportshead[1] %>
            </th>
            <th>
              <%= Sportshead[6] %>
            </th>
            <th>
              <%= Sportshead[3] %>
            </th>
            <th>
              <%= Sportshead[0] %>
            </th>
            <th>
              <%= Sportshead[4] %>
            </th>
            <th>
              <%= Sportshead[5] %>
            </th>
            <th>
              <%= Sportshead[8] %>
            </th>
            <th>
              <%= Sportshead[9] %>
            </th>
            <th>
              <%= Sportshead[10] %>
            </th>
          </tr>
        </thead>
        <tbody>
          <%SportAllObject.forEach(function(i){%>
            <tr>
              <td>
                <%=SportAllObject.indexOf(i)+1%>
              </td>
              <td>
                <%=i.Customer_ID%>
              </td>
              <td>
                <%=i.Product_ID%>
              </td>
              <td>
                <%=i.Order_ID%>
              </td>
              <td>
                <%=i.Order_Date.toISOString().split("T")[0]%>
              </td>
              <td>
                <%=i.Product_Category%>
              </td>
              <td>
                <%=i.Quantity%>
              </td>
              <td>
                <%=i.Unit_Price%>
              </td>
              <td>
                <%=i.Total_Price%>
              </td>
              <td>
                <%=i.Payment_Type%>
              </td>
              <td>
                <%=i.Order_Status%>
              </td>
            </tr>
            <%})%>
        </tbody>
      </table>
    </div>

  </div>
  <!-- kitchen -->
  <div class="table-responsive small" id="tablekitchendiv" style="display: none">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>
            <%= Kitchenhead[7] %>
          </th>
          <th>
            <%= Kitchenhead[2] %>
          </th>
          <th>
            <%= Kitchenhead[1] %>
          </th>
          <th>
            <%= Kitchenhead[6] %>
          </th>
          <th>
            <%= Kitchenhead[3] %>
          </th>
          <th>
            <%= Kitchenhead[0] %>
          </th>
          <th>
            <%= Kitchenhead[4] %>
          </th>
          <th>
            <%= Kitchenhead[5] %>
          </th>
          <th>
            <%= Kitchenhead[8] %>
          </th>
          <th>
            <%= Kitchenhead[9] %>
          </th>
          <th>
            <%= Kitchenhead[10] %>
          </th>
        </tr>
      </thead>
      <tbody>
        <%KitchenAllObject.forEach(function(i){%>
          <tr>
            <td>
              <%=i.Customer_ID%>
            </td>
            <td>
              <%=i.Product_ID%>
            </td>
            <td>
              <%=i.Order_ID%>
            </td>
            <td>
              <%=i.Order_Date.toISOString().split("T")[0]%>
            </td>
            <td>
              <%=i.Product_Category%>
            </td>
            <td>
              <%=i.Quantity%>
            </td>
            <td>
              <%=i.Unit_Price%>
            </td>
            <td>
              <%=i.Total_Price%>
            </td>
            <td>
              <%=i.Payment_Type%>
            </td>
            <td>
              <%=i.Order_Status%>
            </td>
          </tr>
          <%})%>
      </tbody>
    </table>
  </div>
  <!-- Electronics -->
  <div class="table-responsive small" id="tableelectronicdiv" style="display: none">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>
            <%= Electronicshead[7] %>
          </th>
          <th>
            <%= Electronicshead[2] %>
          </th>
          <th>
            <%= Electronicshead[1] %>
          </th>
          <th>
            <%= Electronicshead[6] %>
          </th>
          <th>
            <%= Electronicshead[3] %>
          </th>
          <th>
            <%= Electronicshead[0] %>
          </th>
          <th>
            <%= Kitchenhead[4] %>
          </th>
          <th>
            <%= Kitchenhead[5] %>
          </th>
          <th>
            <%= Kitchenhead[8] %>
          </th>
          <th>
            <%= Kitchenhead[9] %>
          </th>
          <th>
            <%= Kitchenhead[10] %>
          </th>
        </tr>
      </thead>
      <tbody>
        <%ElectronicsAllObject.forEach(function(i){%>
          <tr>
            <td>
              <%=i.Customer_ID%>
            </td>
            <td>
              <%=i.Product_ID%>
            </td>
            <td>
              <%=i.Order_ID%>
            </td>
            <td>
              <%=i.Order_Date.toISOString().split("T")[0]%>
            </td>
            <td>
              <%=i.Product_Category%>
            </td>
            <td>
              <%=i.Quantity%>
            </td>
            <td>
              <%=i.Unit_Price%>
            </td>
            <td>
              <%=i.Total_Price%>
            </td>
            <td>
              <%=i.Payment_Type%>
            </td>
            <td>
              <%=i.Order_Status%>
            </td>
          </tr>
          <%})%>
      </tbody>
    </table>
  </div>
  <!-- Clothing -->
  <div class="table-responsive small" id="tableclothingdiv" style="display: none">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>
            <%= Clothinghead[7] %>
          </th>
          <th>
            <%= Clothinghead[2] %>
          </th>
          <th>
            <%= Clothinghead[1] %>
          </th>
          <th>
            <%= Clothinghead[6] %>
          </th>
          <th>
            <%= Clothinghead[3] %>
          </th>
          <th>
            <%= Clothinghead[0] %>
          </th>
          <th>
            <%= Clothinghead[4] %>
          </th>
          <th>
            <%= Clothinghead[5] %>
          </th>
          <th>
            <%= Clothinghead[8] %>
          </th>
          <th>
            <%= Clothinghead[9] %>
          </th>
          <th>
            <%= Clothinghead[10] %>
          </th>
        </tr>
      </thead>
      <tbody>
        <%ClothingAllObject.forEach(function(i){%>
          <tr>
            <td>
              <%=i.Customer_ID%>
            </td>
            <td>
              <%=i.Product_ID%>
            </td>
            <td>
              <%=i.Order_ID%>
            </td>
            <td>
              <%=i.Order_Date.toISOString().split("T")[0]%>
            </td>
            <td>
              <%=i.Product_Category%>
            </td>
            <td>
              <%=i.Quantity%>
            </td>
            <td>
              <%=i.Unit_Price%>
            </td>
            <td>
              <%=i.Total_Price%>
            </td>
            <td>
              <%=i.Payment_Type%>
            </td>
            <td>
              <%=i.Order_Status%>
            </td>
          </tr>
          <%})%>
      </tbody>
    </table>
  </div>
  <!-- Beauty % Health -->
  <div class="table-responsive small" id="tablebeautydiv" style="display: none">
    <table class="table table-striped table-sm" id="your-tablesportdiv">
      <thead>
        <tr>
          <th>
            <%= Beautyhead[7] %>
          </th>
          <th>
            <%= Beautyhead[2] %>
          </th>
          <th>
            <%= Beautyhead[1] %>
          </th>
          <th>
            <%= Beautyhead[6] %>
          </th>
          <th>
            <%= Beautyhead[3] %>
          </th>
          <th>
            <%= Beautyhead[0] %>
          </th>
          <th>
            <%= Beautyhead[4] %>
          </th>
          <th>
            <%= Beautyhead[5] %>
          </th>
          <th>
            <%= Beautyhead[8] %>
          </th>
          <th>
            <%= Beautyhead[9] %>
          </th>
          <th>
            <%= Beautyhead[10] %>
          </th>
        </tr>
      </thead>
      <tbody>
        <%BeautyAllObject.forEach(function(i){%>
          <tr>
            <td>
              <%=i.Customer_ID%>
            </td>
            <td>
              <%=i.Product_ID%>
            </td>
            <td>
              <%=i.Order_ID%>
            </td>
            <td>
              <%=i.Order_Date.toISOString().split("T")[0]%>
            </td>
            <td>
              <%=i.Product_Category%>
            </td>
            <td>
              <%=i.Quantity%>
            </td>
            <td>
              <%=i.Unit_Price%>
            </td>
            <td>
              <%=i.Total_Price%>
            </td>
            <td>
              <%=i.Payment_Type%>
            </td>
            <td>
              <%=i.Order_Status%>
            </td>
          </tr>
          <%})%>
      </tbody>
    </table>
  </div>
  <!-- Books -->
  <div class="table-responsive small" id="tablebooksdiv" style="display: none">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>
            <%= Bookshead[7] %>
          </th>
          <th>
            <%= Bookshead[2] %>
          </th>
          <th>
            <%= Bookshead[1] %>
          </th>
          <th>
            <%= Bookshead[6] %>
          </th>
          <th>
            <%= Bookshead[3] %>
          </th>
          <th>
            <%= Bookshead[0] %>
          </th>
          <th>
            <%= Bookshead[4] %>
          </th>
          <th>
            <%= Bookshead[5] %>
          </th>
          <th>
            <%= Bookshead[8] %>
          </th>
          <th>
            <%= Bookshead[9] %>
          </th>
          <th>
            <%= Bookshead[10] %>
          </th>
        </tr>
      </thead>
      <tbody>
        <%BooksAllObject.forEach(function(i){%>
          <tr>
            <td>
              <%=i.Customer_ID%>
            </td>
            <td>
              <%=i.Product_ID%>
            </td>
            <td>
              <%=i.Order_ID%>
            </td>
            <td>
              <%=i.Order_Date.toISOString().split("T")[0]%>
            </td>
            <td>
              <%=i.Product_Category%>
            </td>
            <td>
              <%=i.Quantity%>
            </td>
            <td>
              <%=i.Unit_Price%>
            </td>
            <td>
              <%=i.Total_Price%>
            </td>
            <td>
              <%=i.Payment_Type%>
            </td>
            <td>
              <%=i.Order_Status%>
            </td>
          </tr>
          <%})%>
      </tbody>
    </table>
  </div>
  <div class='pagination-container' id="paginationdiv" style="display: none;">
    <nav data-pagination>
      <ul class="pagination">
        <li class="btn btn-outline-info" data-page="prev">
          < </li>
            <!--	Here the JS Function Will Add the Rows -->
        <li data-page="next" class="btn btn-outline-info" id="prev">
          >
        </li>
      </ul>
    </nav>
  </div>
</main>

<script>
  
  $(document).ready(() => {
    function getPagination(table) {
            var lastPage = 1;

            $('#maxRows')
              .on('change', function (evt) {
                //$('.paginationprev').html('');						// reset pagination

                lastPage = 1;
                $('.pagination')
                  .find('li')
                  .slice(1, -1)
                  .remove();
                var trnum = 0; // reset tr counter
                var maxRows = parseInt($(this).val()); // get Max Rows from select option

                if (maxRows == 5000) {
                  $('.pagination').hide();
                } else {
                  $('.pagination').show();
                }

                var totalRows = $(table + ' tbody tr').length; // numbers of rows
                $(table + ' tr:gt(0)').each(function () {
                  // each TR in  table and not the header
                  trnum++; // Start Counter
                  if (trnum > maxRows) {
                    // if tr number gt maxRows

                    $(this).hide(); // fade it out
                  }
                  if (trnum <= maxRows) {
                    $(this).show();
                  } // else fade in Important in case if it ..
                }); //  was fade out to fade it in
                if (totalRows > maxRows) {
                  // if tr total rows gt max rows option
                  var pagenum = Math.ceil(totalRows / maxRows); // ceil total(rows/maxrows) to get ..
                  //	numbers of pages
                  for (var i = 1; i <= pagenum;) {
                    // for each page append pagination li
                    $('.pagination #prev')
                      .before(
                        '<li class="btn btn-outline-info" data-page="' +
                        i +
                        '">\
          								  <span>' +
                        i++ +
                        '</span>\
          								</li>'
                      )
                      .show();
                  } // end for i
                } // end if row count > max rows
                $('.pagination [data-page="1"]').addClass('active'); // add active class to the first li
                $('.pagination li').on('click', function (evt) {
                  // on click each page
                  evt.stopImmediatePropagation();
                  evt.preventDefault();
                  var pageNum = $(this).attr('data-page'); // get it's number

                  var maxRows = parseInt($('#maxRows').val()); // get Max Rows from select option

                  if (pageNum == 'prev') {
                    if (lastPage == 1) {
                      return;
                    }
                    pageNum = --lastPage;
                  }
                  if (pageNum == 'next') {
                    if (lastPage == $('.pagination li').length - 2) {
                      return;
                    }
                    pageNum = ++lastPage;
                  }

                  lastPage = pageNum;
                  var trIndex = 0; // reset tr counter
                  $('.pagination li').removeClass('active'); // remove active class from all li
                  $('.pagination [data-page="' + lastPage + '"]').addClass('active'); // add active class to the clicked
                  // $(this).addClass('active');					// add active class to the clicked
                  limitPagging();
                  $(table + ' tr:gt(0)').each(function () {
                    // each tr in table not the header
                    trIndex++; // tr index counter
                    // if tr index gt maxRows*pageNum or lt maxRows*pageNum-maxRows fade if out
                    if (
                      trIndex > maxRows * pageNum ||
                      trIndex <= maxRows * pageNum - maxRows
                    ) {
                      $(this).hide();
                    } else {
                      $(this).show();
                    }
                  });
                });
                limitPagging();
              })
              .val(5)
              .change();
          }
    function limitPagging() {
            if ($('.pagination li').length > 7) {
              if ($('.pagination li.active').attr('data-page') <= 3) {
                $('.pagination li:gt(5)').hide();
                $('.pagination li:lt(5)').show();
                $('.pagination [data-page="next"]').show();
              } if ($('.pagination li.active').attr('data-page') > 3) {
                $('.pagination li:gt(0)').hide();
                $('.pagination [data-page="next"]').show();
                for (let i = (parseInt($('.pagination li.active').attr('data-page')) - 2); i <= (parseInt($('.pagination li.active').attr('data-page')) + 2); i++) {
                  $('.pagination [data-page="' + i + '"]').show();

                }

              }
            }
          }
    $("#productcategory").text("null");
    $("#categorywiserevenue").text("null");
    $("#tablekitchendiv").hide();
    $("#tablesportdiv").hide();
    $("#tableelectronicdiv").hide();
    $("#tableclothingdiv").hide();
    $("#tablebooksdiv").hide();
    $("#tablebeautydiv").hide();
    $("#selectProductID").on("change", () => {
      if ($("#selectProductID").val() === "Category") {
        $("#productcategory").text("null");
        $("#categorywiserevenue").text(" null");
        $("#tablekitchendiv").hide();
        $("#tablesportdiv").hide();
        $("#tableclothingdiv").hide();
        $("#tableelectronicdiv").hide();
        $("#tablebooksdiv").hide();
        $("#tablebeautydiv").hide();
        $('#paginationdiv').hide();
        $('#selectrows').hide();
        $("h2").hide();
      } else {
        $("h2").show();
        $("h2").text($("#selectProductID").val());
        $("#productcategory").text($("#selectProductID").val());
        if ($("#selectProductID").val() === "Sports & Outdoors") {
          //hide
          $("#tableelectronicdiv").hide();
          $("#tablekitchendiv").hide();
          $("#tableclothingdiv").hide();
          $("#tablebooksdiv").hide();
          $("#tablebeautydiv").hide();
          //show
          $("#tablesportdiv").show();
          $('#paginationdiv').show();
          $('#selectrows').show();
          $("#categorywiserordercount").text("<%=sportordercount%>");
          $("#categorywiserevenue").text("<%=Math.round(sportsrevenue)%>");

          getPagination('#tablesportdiv');

        } else if ($("#selectProductID").val() === "Home & Kitchen") {
          //hide
          $("#tableelectronicdiv").hide();
          $("#tablesportdiv").hide();
          $("#tableclothingdiv").hide();
          $("#tablebooksdiv").hide();
          $("#tablebeautydiv").hide();

          //show
          $("#tablekitchendiv").show();
          $('#paginationdiv').show();
          $('#selectrows').show();
          $("#categorywiserordercount").text("<%=kitchenordercount%>");
          $("#categorywiserevenue").text("<%=Math.round(homeandkitchenrevenue)%>");
          getPagination('#tablekitchendiv');
        } else if ($("#selectProductID").val() === "Electronics") {
          //hide
          $("#tablesportdiv").hide();
          $("#tablekitchendiv").hide();
          $("#tableclothingdiv").hide();
          $("#tablebooksdiv").hide();
          $("#tablebeautydiv").hide();

          //show
          $('#paginationdiv').show();
          $('#selectrows').show();
          $("#tableelectronicdiv").show();
          $("#categorywiserevenue").text("<%=Math.round(electronicsrevenue)%>");
          getPagination('#tableelectronicdiv');
        } else if ($("#selectProductID").val() === "Clothing") {
          //hide
          $("#tablekitchendiv").hide();
          $("#tablesportdiv").hide();
          $("#tableelectronicdiv").hide();
          $("#tablebooksdiv").hide();
          $("#tablebeautydiv").hide();
          //show
          $('#paginationdiv').show();
          $('#selectrows').show();
          $("#tableclothingdiv").show();
          $("#categorywiserordercount").text("<%=clothingordercount%>");
          $("#categorywiserevenue").text("<%=Math.round(clothingrevenue)%>");
          getPagination('#tableclothingdiv');
        } else if ($("#selectProductID").val() === "Books") {
          //hide
          $("#tablekitchendiv").hide();
          $("#tablesportdiv").hide();
          $("#tableclothingdiv").hide();
          $("#tableelectronicdiv").hide();
          $("#tablebeautydiv").hide();

          //show
          $('#paginationdiv').show();
          $('#selectrows').show();
          $("#tablebooksdiv").show();
          $("#categorywiserordercount").text("<%=booksordercount%>");
          $("#categorywiserevenue").text("<%=Math.round(booksrevenue)%>");
          getPagination('#tablebooksdiv');
        } else if ($("#selectProductID").val() === "Beauty & Health") {
          //hide
          $("#tablekitchendiv").hide();
          $("#tablesportdiv").hide();
          $("#tableclothingdiv").hide();
          $("#tableelectronicdiv").hide();
          $("#tablebooksdiv").hide();

          //show
          $('#paginationdiv').show();
          $('#selectrows').show();
          $("#tablebeautydiv").show();
          $("#categorywiserordercount").text("<%=beautyordercount%>");
          $("#categorywiserevenue").text("<%=Math.round(beautyandhealthrevenue)%>");
          getPagination('#  tablebeautydiv');
        }
      }
    });
  });
</script>
<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.2/dist/chart.umd.js" integrity="sha384-eI7PSr3L1XLISH8JdDII5YN/njoSsxfbrkCTnJrzXt+ENP5MOVBxD+l6sEG4zoLp" crossorigin="anonymous"></script>
  <script>
    (() => {
    'use strict'
  
    // Graphs
    const ctx = document.getElementById('myChart')
    // eslint-disable-next-line no-unused-vars
    const myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [
          'Sunday',
          'Monday',
          'Tuesday',
          'Wednesday',
          'Thursday',
          'Friday',
          'Saturday'
        ],
        datasets: [{
          data: [
            15339,
            21345,
            18483,
            24003,
            23489,
            24092,
            12034
          ],
          lineTension: 0,
          backgroundColor: 'transparent',
          borderColor: '#007bff',
          borderWidth: 4,
          pointBackgroundColor: '#007bff'
        }]
      },
      options: {
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            boxPadding: 3
          }
        }
      }
    })
  })()
  </script> -->